const showFlights = async (req, res) => {
	const { from, to, date, sortParam, sortOrder } = req.query;
	console.log(sortParam, sortOrder);
	if (!from && !to && !date) {
        //check if from , to and date are present , if not give list of all flights with a limit
		if (!sortParam) {
			const flights = await Flight.find({});
			return res.status(200).send(flights);
		} else {
			const flights = await Flight.find({}).sort({
				sortParam,
			}); //sorting order will be in the form of an object with sortkey and 1 for ascending and -1 for descending , it will directly com from the fronend.
			return res.status(200).json(flights);
		}
	} else if (from.length !== 0 && to.length !== 0 && !date) {
		let flights;
		if (!sortParam) {
			flights = await Flight.find({ from, to });
		} else {
			flights = await Flight.find({ from, to }).sort(
				sortParam,
				sortOrder
			);
		}
		if (flights.length === 0) {
			res.status(404);
			throw Error("no fligths found!");
		} else {
			return res.status(200).json(flights);
		}
	}
	const flights = await Flight.find({ from, to, date });
	console.log(flights);
	if (flights.length === 0) {
		res.status(404);
		throw Error("no flights found!");
	} else {
		res.status(200).json(flights);
	}
};